# Experiment 013: Full TF Determinism Verification
# Pipeline: dc-ablation-pipeline
# Date: 2026-02-19
#
# Same config as exp 012 but with full TF determinism:
# - tf.keras.utils.set_random_seed(42) instead of manual seeding
# - tf.config.experimental.enable_op_determinism() for deterministic ops
# - Explicit seed=42 in tf.data.Dataset.shuffle()
# - PYTHONHASHSEED=42 set as environment variable
#
# If results differ from exp 012, the extra determinism measures matter.
# This establishes the deterministic baseline for future threshold sweep.

pipeline: pipeline_ablation.py

data:
  instrument: BTC-USD
  start_time: "2025-05-01 00:00:00"
  end_time: "2025-08-01 00:00:00"

model:
  architecture: Flatten -> Dense(128, relu) [bottleneck] -> Dense(64, relu) -> Dense(32, relu) -> Dense(1)
  bottleneck_dim: 128
  dropout_rate: 0.0
  l2_reg: 0.0

windowing:
  input_width: 50
  shift: 50
  label_width: 1

hparams:
  batch_size: 100
  epochs: 20
  learning_rate: 0.01
  patience: 5
  random_seed: 42

dc:
  single_dc_threshold: 0.001
  dc_thresholds: [0.001, 0.005, 0.010, 0.015]

determinism:
  tf_op_determinism: true
  explicit_shuffle_seed: true
  pythonhashseed: "42"
